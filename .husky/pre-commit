#!/usr/bin/env sh

# ì‚­ì œëœ íŒŒì¼ì„ ì œì™¸í•˜ê³  ìŠ¤í…Œì´ì§•ëœ /back í•˜ìœ„ .kt íŒŒì¼ ì¶”ì¶œ, ë°˜í™˜ëœ íŒŒì¼ì´ ì—†ìœ¼ë©´ ì •ìƒ ì¢…ë£Œ
stagedKtFiles=$(git diff --staged --name-only --diff-filter=d | grep '^back/.*\.kt$' || true)

if [ -n "$stagedKtFiles" ]; then
  echo "==================== ktlintFormat::start ========================"
  echo "ğŸ” Running ktlintFormat"
  cd back && ./gradlew ktlintFormat && cd ..
  echo "$stagedKtFiles" | xargs git add
  echo "âœ… Ktlint format completed."
  echo "==================== ktlintFormat::end ========================"
fi
